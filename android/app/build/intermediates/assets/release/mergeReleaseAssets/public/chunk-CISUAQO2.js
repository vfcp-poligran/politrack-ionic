import{A as We,B as Ue,C as Ke,D as Ye,E as Je,F as He,G as Qe,H as Xe,J as Ze,L as et,M as tt,O as it,P as nt,Q as ot,R as rt,a as te,c as Ae,d as Se,e as we,f as ye,g as Me,h as Oe,i as Ie,j as ke,k as je,l as Ge,m as ie,n as Te,o as Fe,p as De,q as Ve,r as Ne,s as ze,u as $e,w as Re,x as Le,y as qe,z as Be}from"./chunk-47DUQTFK.js";import{$ as K,A as G,B as T,C as se,F as ce,G as $,H as le,J as R,M as ue,O as de,S as L,T as q,U as B,Y as W,Z as U,_ as me,ca as pe,da as Y,e as y,ea as ge,fa as J,g as b,h as C,ha as ve,i as s,ia as he,j as N,ja as H,k as A,ka as Q,l as x,la as X,m as o,n as r,na as _e,o as S,oa as fe,p as M,pa as be,q as _,qa as Z,r as g,ra as ee,s as re,sa as Ce,t as F,ta as xe,u as z,ua as Ee,v as c,va as Pe,w,x as E,y as D,ya as at,z as j}from"./chunk-NLSVU5MR.js";import"./chunk-6MNK6QKE.js";import"./chunk-MEYP5NZB.js";import"./chunk-ZLB3EPWC.js";import"./chunk-QW6WU7KL.js";import"./chunk-TIXESEZQ.js";import"./chunk-BUMCRR6Y.js";import"./chunk-DNTR6X5U.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as oe,b as ae,h as P}from"./chunk-B7O3QC5Z.js";function pt(u,p){if(u&1){let n=M();o(0,"ion-chip",23),_("click",function(){let t=b(n).$implicit,i=g();return C(i.agregarComentarioComun(t))}),S(1,"ion-icon",24),o(2,"ion-label"),c(3),r()()}if(u&2){let n=p.$implicit;s(3),w(n)}}var st=(()=>{let p=class p{constructor(){this.criterioNombre="",this.comentarios="",this.puntajeOriginal=0,this.ajustePuntaje=0,this.comentariosComunes=[],this.guardarComoComun=!1,this.modalController=y(X),te({close:ie,save:Xe,addCircleOutline:Ae})}ngOnInit(){this.puntajeOriginal=Number(this.puntajeOriginal)||0,this.ajustePuntaje=Number(this.ajustePuntaje)||0}cancelar(){this.modalController.dismiss(null,"cancel")}confirmar(){let e=Number(this.ajustePuntaje)||0,t={comentarios:this.comentarios,ajustePuntaje:e,guardarComoComun:this.guardarComoComun};this.modalController.dismiss(t,"confirm")}agregarComentarioComun(e){this.comentarios&&this.comentarios.trim()?this.comentarios=this.comentarios.trim()+`
- `+e:this.comentarios="- "+e}calcularPuntajeFinal(){let e=Number(this.puntajeOriginal)||0,t=Number(this.ajustePuntaje)||0;return Math.max(0,e+t)}};p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=N({type:p,selectors:[["app-comentarios-modal"]],inputs:{criterioNombre:"criterioNombre",comentarios:"comentarios",puntajeOriginal:"puntajeOriginal",ajustePuntaje:"ajustePuntaje",comentariosComunes:"comentariosComunes"},decls:41,vars:9,consts:[[1,"ion-no-border"],["color","primary"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],[1,"comentario-textarea"],["position","floating"],["rows","6","placeholder","Escriba sus observaciones...",3,"ngModelChange","ngModel"],[1,"comentarios-comunes"],[1,"comentarios-label"],[1,"chips-container"],["outline","true","color","primary",3,"click",4,"ngFor","ngForOf"],["lines","none",1,"guardar-comun-item"],["slot","start","labelPlacement","end",3,"ngModelChange","ngModel","disabled"],[1,"ajuste-puntaje"],[1,"ajuste-label"],[1,"puntaje-info"],[1,"ajuste-input"],["type","number","placeholder","Ej: -2 o 5",3,"ngModelChange","ngModel"],[1,"puntaje-final"],["color","primary","fill","solid",3,"click","strong"],["slot","start","name","save"],["outline","true","color","primary",3,"click"],["name","add-circle-outline"]],template:function(t,i){t&1&&(o(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),c(3),r(),o(4,"ion-buttons",2)(5,"ion-button",3),_("click",function(){return i.cancelar()}),S(6,"ion-icon",4),r()()()(),o(7,"ion-content",5)(8,"ion-item",6)(9,"ion-label",7),c(10,"Comentarios"),r(),o(11,"ion-textarea",8),T("ngModelChange",function(l){return G(i.comentarios,l)||(i.comentarios=l),l}),r()(),o(12,"div",9)(13,"ion-label",10),c(14,"Sugerencias (clic para a\xF1adir)"),r(),o(15,"div",11),A(16,pt,4,1,"ion-chip",12),r(),o(17,"ion-item",13)(18,"ion-checkbox",14),T("ngModelChange",function(l){return G(i.guardarComoComun,l)||(i.guardarComoComun=l),l}),c(19," Guardar comentario actual como sugerencia "),r()()(),o(20,"div",15)(21,"ion-label",16),c(22,"Ajuste de Puntaje Manual"),r(),o(23,"p",17),c(24,"Puntaje base (del nivel): "),o(25,"strong"),c(26),r()(),o(27,"ion-item",18)(28,"ion-label",7),c(29,"Ajuste (+/-)"),r(),o(30,"ion-input",19),T("ngModelChange",function(l){return G(i.ajustePuntaje,l)||(i.ajustePuntaje=l),l}),r()(),o(31,"p",20),c(32,"Puntaje Final: "),o(33,"strong"),c(34),r()()()(),o(35,"ion-footer",0)(36,"ion-toolbar")(37,"ion-buttons",2)(38,"ion-button",21),_("click",function(){return i.confirmar()}),S(39,"ion-icon",22),c(40," Guardar Cambios "),r()()()()),t&2&&(s(3),E("Comentarios y Ajuste - ",i.criterioNombre),s(8),j("ngModel",i.comentarios),s(5),x("ngForOf",i.comentariosComunes),s(2),j("ngModel",i.guardarComoComun),x("disabled",!i.comentarios||i.comentarios.trim().length===0),s(8),w(i.puntajeOriginal),s(4),j("ngModel",i.ajustePuntaje),s(4),w(i.calcularPuntajeFinal()),s(4),x("strong",!0))},dependencies:[R,$,B,L,q,Y,Q,H,K,W,ee,Pe,Ce,ge,J,me,Z,pe,U],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--border-width: 0}ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-light-tint)}.comentario-textarea[_ngcontent-%COMP%]{--background: var(--ion-background-color);--border-radius: 8px;margin-bottom:16px}.comentarios-comunes[_ngcontent-%COMP%]{margin-top:16px;padding:12px;background:var(--ion-background-color);border-radius:8px;border:1px solid var(--ion-color-step-150)}.comentarios-label[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-medium-shade);font-size:.9em;margin-left:4px}.chips-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;padding:8px 0}ion-chip[_ngcontent-%COMP%]{cursor:pointer;font-size:.9em;--padding-start: 8px;--padding-end: 8px}.guardar-comun-item[_ngcontent-%COMP%]{--padding-start: 0;font-size:.9em;--min-height: 30px}.ajuste-puntaje[_ngcontent-%COMP%]{margin-top:16px;padding:12px;border:1px solid var(--ion-color-step-150);background:var(--ion-background-color);border-radius:8px}.ajuste-label[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-primary);font-size:1.1em;display:block;margin-bottom:8px}.puntaje-info[_ngcontent-%COMP%]{font-size:.95em;color:var(--ion-color-medium-shade);margin:4px 0 8px}.ajuste-input[_ngcontent-%COMP%]{--background: var(--ion-color-light-tint);--border-radius: 6px}.puntaje-final[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;text-align:right;margin-top:12px;color:var(--ion-color-primary)}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:8px;--background: var(--ion-background-color);border-top:1px solid var(--ion-color-step-150)}"]});let u=p;return u})();var gt=()=>["E1","E2","EF"];function vt(u,p){u&1&&(o(0,"div",18),S(1,"ion-spinner",19),o(2,"p"),c(3,"Cargando..."),r()())}function ht(u,p){if(u&1){let n=M();o(0,"tr",52),_("click",function(){let t=b(n).$implicit,i=g(2);return C(i.abrirEvaluacion(t))}),o(1,"td",53),_("click",function(t){return b(n),C(t.stopPropagation())}),o(2,"ion-checkbox",54),_("ionChange",function(){let t=b(n).$implicit,i=g(2);return C(i.toggleSelectEstudiante(t.correo))}),r()(),o(3,"td",29),c(4),r(),o(5,"td",30),c(6),r(),o(7,"td",31),c(8),r(),o(9,"td",55),_("click",function(t){return b(n),C(t.stopPropagation())}),o(10,"span",56),_("click",function(){let t=b(n).$implicit,i=g(2);return C(i.abrirEditorPuntos(t,"E1"))}),c(11),r()(),o(12,"td",55),_("click",function(t){return b(n),C(t.stopPropagation())}),o(13,"span",56),_("click",function(){let t=b(n).$implicit,i=g(2);return C(i.abrirEditorPuntos(t,"E1"))}),c(14),r()(),o(15,"td",57),c(16),r(),o(17,"td",55),_("click",function(t){return b(n),C(t.stopPropagation())}),o(18,"span",56),_("click",function(){let t=b(n).$implicit,i=g(2);return C(i.abrirEditorPuntos(t,"E2"))}),c(19),r()(),o(20,"td",55),_("click",function(t){return b(n),C(t.stopPropagation())}),o(21,"span",56),_("click",function(){let t=b(n).$implicit,i=g(2);return C(i.abrirEditorPuntos(t,"E2"))}),c(22),r()(),o(23,"td",57),c(24),r(),o(25,"td",55),_("click",function(t){return b(n),C(t.stopPropagation())}),o(26,"span",56),_("click",function(){let t=b(n).$implicit,i=g(2);return C(i.abrirEditorPuntos(t,"EF"))}),c(27),r()(),o(28,"td",55),_("click",function(t){return b(n),C(t.stopPropagation())}),o(29,"span",56),_("click",function(){let t=b(n).$implicit,i=g(2);return C(i.abrirEditorPuntos(t,"EF"))}),c(30),r()(),o(31,"td",58),c(32),r()()}if(u&2){let n,e,t,i,a,l,d,m,h,v=p.$implicit,f=g(2);F("selected",f.isSelected(v.correo))("evaluando",(f.evaluacionActual.estudiante==null?null:f.evaluacionActual.estudiante.correo)===v.correo)("puntos-actualizados",f.isPuntosActualizados(v.correo)),s(2),x("checked",f.isSelected(v.correo)),s(2),E(" ",v.apellidos," "),s(2),E(" ",v.nombres," "),s(2),E(" ",v.subgrupo?v.subgrupo.replace("G",""):"-"," "),s(3),E(" ",((n=f.getEvaluacion(v.correo,"E1"))==null?null:n.pg_score)||"-"," "),s(3),E(" ",((e=f.getEvaluacion(v.correo,"E1"))==null?null:e.pi_score)||"-"," "),s(2),E(" ",((t=f.getEvaluacion(v.correo,"E1"))==null?null:t.sumatoria)||"-"," "),s(3),E(" ",((i=f.getEvaluacion(v.correo,"E2"))==null?null:i.pg_score)||"-"," "),s(3),E(" ",((a=f.getEvaluacion(v.correo,"E2"))==null?null:a.pi_score)||"-"," "),s(2),E(" ",((l=f.getEvaluacion(v.correo,"E2"))==null?null:l.sumatoria)||"-"," "),s(3),E(" ",((d=f.getEvaluacion(v.correo,"EF"))==null?null:d.pg_score)||"-"," "),s(3),E(" ",((m=f.getEvaluacion(v.correo,"EF"))==null?null:m.pi_score)||"-"," "),s(2),E(" ",((h=f.getEvaluacion(v.correo,"EF"))==null?null:h.sumatoria)||"-"," ")}}function _t(u,p){if(u&1&&(o(0,"div",73),c(1),r()),u&2){let n=g().$implicit;s(),E(" Comentarios: ",n.comentario," ")}}function ft(u,p){if(u&1&&(o(0,"div",67)(1,"div",68),c(2),r(),o(3,"div",69),c(4),r(),o(5,"div",70),c(6),r(),o(7,"div",71),c(8),r(),A(9,_t,2,1,"div",72),r()),u&2){let n=p.$implicit;s(2),D(" ",n.nombre," ",n.peso," "),s(2),E(" ",n.nivelesInfo," "),s(2),D(" ",n.nivelSeleccionado," (",n.puntos," pts) "),s(2),E(" ",n.descripcion," "),s(),x("ngIf",n.tieneComentario)}}function bt(u,p){if(u&1&&(o(0,"div",74)(1,"div",75),c(2),r(),o(3,"div",76),c(4),r()()),u&2){let n=p.$implicit,e=g(3);s(2),E("",n,":"),s(2),E(" ",e.getRendimientoEntrega(n)," ")}}function Ct(u,p){if(u&1&&(o(0,"div",59)(1,"div",60)(2,"h4",61),c(3),r(),o(4,"div",62),A(5,ft,10,7,"div",63),r(),o(6,"div",64)(7,"h4",65),c(8,"Rendimiento por Entrega"),r(),A(9,bt,5,2,"div",66),r()()()),u&2){let n=g(2);s(3),E(" Resumen de R\xFAbrica - ",n.evaluacionGrupal.entrega," "),s(2),x("ngForOf",n.getResumenRubrica()),s(4),x("ngForOf",se(3,gt))}}function xt(u,p){if(u&1&&(o(0,"div",77)(1,"div",78)(2,"span",79),c(3,"Puntos totales:"),r(),o(4,"span",80),c(5),r()(),o(6,"div",78)(7,"span",79),c(8,"Progreso:"),r(),o(9,"div",81),S(10,"div",82),r()()()),u&2){let n=g(2);s(5),D("",n.calcularTotalEvaluacion()," / ",n.getMaximoPuntaje()),s(5),re("width",n.getPorcentajeCompletitud(),"%")}}function Et(u,p){if(u&1){let n=M();o(0,"button",48),_("click",function(){let t=b(n).$implicit,i=g(2);return C(i.seleccionarSubgrupo(t))}),c(1),r()}if(u&2){let n=p.$implicit,e=g(2);F("active",e.subgrupoSeleccionado===n),s(),E(" ",n.replace("G","")," ")}}function Pt(u,p){if(u&1&&(o(0,"h4"),c(1),r()),u&2){let n=g(3);s(),D(" Evaluando: ",n.evaluacionActual.estudiante.nombres," ",n.evaluacionActual.estudiante.apellidos," ")}}function At(u,p){if(u&1&&(o(0,"h4"),c(1),r()),u&2){let n=g(3);s(),E(" Evaluaci\xF3n Grupal: ",n.subgrupoSeleccionado," ")}}function St(u,p){if(u&1){let n=M();o(0,"div",83)(1,"div",84)(2,"div",85),A(3,Pt,2,2,"h4",86)(4,At,2,1,"h4",86),o(5,"div",87)(6,"span",88),c(7),r(),o(8,"span",89),c(9),r(),o(10,"span",90),c(11),r()()(),o(12,"div",91)(13,"button",92),_("click",function(){b(n);let t=g(2);return C(t.cancelarEvaluacion())}),c(14," \u274C "),r(),o(15,"button",93),_("click",function(){b(n);let t=g(2);return C(t.finalizarEvaluacion())}),c(16," \u{1F4BE} "),r()()()()}if(u&2){let n=g(2);s(3),x("ngIf",!n.evaluacionGrupalActiva&&n.evaluacionActual.estudiante),s(),x("ngIf",n.evaluacionGrupalActiva),s(3),w(n.evaluacionGrupalActiva?n.evaluacionGrupal.entrega:n.evaluacionActual.entrega),s(),F("grupal",n.evaluacionGrupalActiva)("individual",!n.evaluacionGrupalActiva),s(),E(" ",n.evaluacionGrupalActiva?"GRUPAL":"INDIVIDUAL"," "),s(),x("ngClass","rendimiento-"+n.getClaseRendimiento()),s(),D(" ",n.getPorcentajeCompletitud(),"% - ",n.getTextoRendimiento()," "),s(4),x("disabled",!n.isEvaluacionCompleta())}}function wt(u,p){if(u&1){let n=M();o(0,"div",100)(1,"ion-checkbox",54),_("ionChange",function(){let t=b(n).index,i=g(3);return C(i.selectNivelParaTodosCriterios(t))}),r(),o(2,"span",101),_("click",function(){let t=b(n).index,i=g(3);return C(i.selectNivelParaTodosCriterios(t))}),c(3),r()()}if(u&2){let n=p.$implicit,e=p.index,t=g(3);z("nivel-"+e),F("active",t.isTodosCriteriosConNivel(e)),s(),x("checked",t.isTodosCriteriosConNivel(e)),s(2),w(n.nombre)}}function yt(u,p){u&1&&S(0,"ion-icon",117)}function Mt(u,p){if(u&1){let n=M();o(0,"div",109),_("click",function(){let t=b(n).$implicit,i=g().$implicit,a=g(3);return C(a.selectNivel(i.codigo,t.valor))}),o(1,"div",110)(2,"div",111)(3,"span",112),A(4,yt,1,0,"ion-icon",113),o(5,"span",114),c(6),r()(),o(7,"span",115),c(8),r()(),o(9,"p",116),c(10),r()()()}if(u&2){let n=p.$implicit,e=p.index,t=g().$implicit,i=g(3);z("nivel-"+e),F("selected",i.getCriterioValue(t.codigo)===n.valor)("available",i.evaluacionActual.estudiante||i.evaluacionGrupalActiva),s(4),x("ngIf",i.tieneComentarioCriterio(t.codigo)&&i.getCriterioValue(t.codigo)===n.valor),s(2),w(n.valor),s(2),w(i.getRangoNivel(t,e)),s(2),w(n.descripcion)}}function Ot(u,p){if(u&1){let n=M();o(0,"div",102)(1,"div",103)(2,"div",104)(3,"ion-button",105),_("click",function(){let t=b(n).$implicit,i=g(3);return C(i.abrirComentarios(t.codigo,t.nombre))}),S(4,"ion-icon",106),r(),o(5,"h3"),c(6),r()(),o(7,"span",107),c(8),r()(),A(9,Mt,11,10,"div",108),r()}if(u&2){let n=p.$implicit,e=g(3);s(3),z("comentario-btn "+(e.tieneComentarioCriterio(n.codigo)?"has-comment":"")),x("title",e.tieneComentarioCriterio(n.codigo)?"Ver/editar comentario existente":"Agregar comentario"),s(),x("name",e.tieneComentarioCriterio(n.codigo)?"chatbox":"chatbox-outline"),s(2),w(n.nombre),s(2),w(n.peso),s(),x("ngForOf",n.niveles)}}function It(u,p){if(u&1&&(o(0,"div",94)(1,"div",95)(2,"div",96),c(3,"Criterio"),r(),A(4,wt,4,6,"div",97),r(),o(5,"div",98),A(6,Ot,10,7,"div",99),r()()),u&2){let n=g(2);s(4),x("ngForOf",n.getNivelesRubrica()),s(2),x("ngForOf",n.getCriteriosEntregaActiva())}}function kt(u,p){if(u&1){let n=M();o(0,"div",20)(1,"div",21)(2,"div",22)(3,"ion-searchbar",23),T("ngModelChange",function(t){b(n);let i=g();return G(i.searchText,t)||(i.searchText=t),C(t)}),_("ionInput",function(t){b(n);let i=g();return C(i.onSearchChange(t))}),r()(),o(4,"div",24)(5,"table",25)(6,"thead")(7,"tr",26)(8,"th",27)(9,"ion-checkbox",28),T("ngModelChange",function(t){b(n);let i=g();return G(i.selectAll,t)||(i.selectAll=t),C(t)}),_("ionChange",function(t){b(n);let i=g();return C(i.toggleSelectAll(t))}),r()(),o(10,"th",29),c(11,"Apellidos"),r(),o(12,"th",30),c(13,"Nombres"),r(),o(14,"th",31),c(15,"G"),r(),o(16,"th",32),c(17,"E1-PG"),r(),o(18,"th",32),c(19,"E1-PI"),r(),o(20,"th",33),c(21,"E1-\u03A3"),r(),o(22,"th",32),c(23,"E2-PG"),r(),o(24,"th",32),c(25,"E2-PI"),r(),o(26,"th",33),c(27,"E2-\u03A3"),r(),o(28,"th",32),c(29,"EF-PG"),r(),o(30,"th",32),c(31,"EF-PI"),r(),o(32,"th",34),c(33,"EF-\u03A3"),r()()(),o(34,"tbody"),A(35,ht,33,19,"tr",35),r()()(),A(36,Ct,10,4,"div",36),r(),o(37,"div",37)(38,"div",38)(39,"h3"),c(40),o(41,"span",39),c(42),r()(),A(43,xt,11,4,"div",40),r(),o(44,"div",41)(45,"div",42)(46,"ion-segment",28),T("ngModelChange",function(t){b(n);let i=g();return G(i.entregaActiva,t)||(i.entregaActiva=t),C(t)}),_("ionChange",function(t){b(n);let i=g();return C(i.onEntregaChange(t))}),o(47,"ion-segment-button",43)(48,"ion-label"),c(49,"Entrega 1"),r()(),o(50,"ion-segment-button",44)(51,"ion-label"),c(52,"Entrega 2"),r()(),o(53,"ion-segment-button",45)(54,"ion-label"),c(55,"EF"),r()()()(),S(56,"div",46),o(57,"div",47)(58,"button",48),_("click",function(){b(n);let t=g();return C(t.seleccionarSubgrupo(""))}),c(59," T "),r(),A(60,Et,2,3,"button",49),r(),A(61,St,17,12,"div",50)(62,It,7,2,"div",51),r()()()}if(u&2){let n=g();s(3),j("ngModel",n.searchText),s(6),j("ngModel",n.selectAll),s(26),x("ngForOf",n.estudiantesFiltrados),s(),x("ngIf",n.mostrarResumen&&n.evaluacionGrupalActiva),s(4),E("Seguimiento - ",n.curso.codigo||"Curso"," "),s(2),E("",n.getTotalEstudiantes()," estudiantes"),s(),x("ngIf",n.evaluacionActual.estudiante||n.evaluacionGrupalActiva),s(3),j("ngModel",n.entregaActiva),s(12),F("active",n.subgrupoSeleccionado===""),s(2),x("ngForOf",n.getSubgruposOrdenados()),s(),x("ngIf",n.evaluacionActual.estudiante||n.evaluacionGrupalActiva),s(),x("ngIf",n.evaluacionActual.estudiante||n.evaluacionGrupalActiva)}}function jt(u,p){u&1&&(o(0,"div",118),S(1,"ion-icon",119),o(2,"h2"),c(3,"No hay estudiantes"),r(),o(4,"p"),c(5,"Este curso no tiene estudiantes registrados"),r()())}var ct={E1:[{codigo:"documento_inicial",nombre:"Documento Inicial",peso:"(5)",maxPuntos:5,niveles:[{valor:1,nombre:"Insuficiente",descripcion:"Sin formato o incompleto."},{valor:3,nombre:"Aceptable",descripcion:"Formato b\xE1sico adecuado."},{valor:5,nombre:"Excelente",descripcion:"Formato profesional y portada completa."}]},{codigo:"planteamiento_objetivos",nombre:"Planteamiento y Objetivos",peso:"(5)",maxPuntos:5,niveles:[{valor:1,nombre:"Insuficiente",descripcion:"Objetivos vagos o incompletos."},{valor:3,nombre:"Aceptable",descripcion:"Objetivos claros con algunos detalles."},{valor:5,nombre:"Excelente",descripcion:"Objetivos SMART."}]},{codigo:"requerimientos",nombre:"Requerimientos",peso:"(10)",maxPuntos:10,niveles:[{valor:4,nombre:"Insuficiente",descripcion:"Lista incompleta o confusa."},{valor:7,nombre:"Aceptable",descripcion:"Identifica la mayor\xEDa."},{valor:10,nombre:"Excelente",descripcion:"Identifica exhaustivamente todos."}]},{codigo:"flujo_navegacion",nombre:"Flujo de Navegaci\xF3n",peso:"(30)",maxPuntos:30,niveles:[{valor:9,nombre:"Insuficiente",descripcion:"Confuso o incompleto."},{valor:20,nombre:"Aceptable",descripcion:"Flujo funcional y comprensible."},{valor:30,nombre:"Excelente",descripcion:"Flujo completo, claro y detallado."}]},{codigo:"mockups_wireframes",nombre:"Mockups y Wireframes",peso:"(25)",maxPuntos:25,niveles:[{valor:7,nombre:"Insuficiente",descripcion:"B\xE1sicos o de baja calidad."},{valor:17,nombre:"Aceptable",descripcion:"Mockups funcionales."},{valor:25,nombre:"Excelente",descripcion:"Mockups completos y profesionales."}]}],E2:[{codigo:"atencion_ajustes_tutor",nombre:"Atenci\xF3n de ajustes del tutor",peso:"(5)",maxPuntos:5,niveles:[{valor:1,nombre:"Insuficiente",descripcion:"Menos del 70% de comentarios atendidos, ajustes superficiales o incompletos."},{valor:3,nombre:"Aceptable",descripcion:"Se atendi\xF3 el 70-90% de los comentarios con algunos detalles pendientes."},{valor:5,nombre:"Excelente",descripcion:"Todos los comentarios se atendieron de manera completa y pertinente."}]},{codigo:"flujo_navegacion_mockups",nombre:"Flujo de navegaci\xF3n y mockups",peso:"(10)",maxPuntos:10,niveles:[{valor:4,nombre:"Insuficiente",descripcion:"Flujo confuso, incompleto o sin l\xF3gica clara."},{valor:7,nombre:"Aceptable",descripcion:"Flujo comprensible con inconsistencias menores."},{valor:10,nombre:"Excelente",descripcion:"Flujo completo, l\xF3gico e intuitivo con mockups bien dise\xF1ados."}]},{codigo:"requerimientos_actualizados",nombre:"Requerimientos actualizados",peso:"(10)",maxPuntos:10,niveles:[{valor:4,nombre:"Insuficiente",descripcion:"Incompletos, desactualizados o mal redactados."},{valor:7,nombre:"Aceptable",descripcion:"Presentes y actualizados, pero con falta de claridad o detalle."},{valor:10,nombre:"Excelente",descripcion:"Completos, bien redactados, actualizados y coherentes."}]},{codigo:"implementacion_interfaces",nombre:"Implementaci\xF3n de interfaces (70%)",peso:"(20)",maxPuntos:20,niveles:[{valor:9,nombre:"Insuficiente",descripcion:"Menos del 60% de interfaces, errores significativos."},{valor:15,nombre:"Aceptable",descripcion:"60-89% de interfaces, errores menores."},{valor:20,nombre:"Excelente",descripcion:"90-100% de interfaces, navegaci\xF3n correcta."}]},{codigo:"desarrollo_requerimientos",nombre:"Desarrollo de requerimientos",peso:"(30)",maxPuntos:30,niveles:[{valor:14,nombre:"Insuficiente",descripcion:"Menos del 50% implementado, errores significativos."},{valor:23,nombre:"Aceptable",descripcion:"50-79% implementado, l\xF3gica con errores menores."},{valor:30,nombre:"Excelente",descripcion:"80-100% implementado, l\xF3gica correcta y buenas pr\xE1cticas."}]}],EF:[{codigo:"video",nombre:"Video",peso:"(10)",maxPuntos:10,niveles:[{valor:4,nombre:"Insuficiente",descripcion:"El video no es claro, no muestra toda la funcionalidad o tiene mala calidad."},{valor:7,nombre:"Aceptable",descripcion:"El video es claro, pero no cubre toda la funcionalidad o tiene detalles de calidad."},{valor:10,nombre:"Excelente",descripcion:"Video claro, conciso, que demuestra toda la funcionalidad principal."}]},{codigo:"cumplimiento_requerimientos",nombre:"Cumplimiento de Requerimientos",peso:"(65)",maxPuntos:65,niveles:[{valor:16,nombre:"Insuficiente",descripcion:"Menos del 70% de los requerimientos funcionales implementados."},{valor:41,nombre:"Aceptable",descripcion:"Entre el 70% y 90% de los requerimientos funcionales implementados."},{valor:65,nombre:"Excelente",descripcion:"M\xE1s del 90% de los requerimientos funcionales implementados."}]},{codigo:"calidad_codigo_arquitectura",nombre:"Calidad del C\xF3digo y Arquitectura",peso:"(15)",maxPuntos:15,niveles:[{valor:5,nombre:"Insuficiente",descripcion:"El c\xF3digo es desorganizado, dif\xEDcil de leer o no sigue patrones de arquitectura."},{valor:10,nombre:"Aceptable",descripcion:"El c\xF3digo es legible y sigue principios b\xE1sicos de arquitectura, pero tiene \xE1reas de mejora."},{valor:15,nombre:"Excelente",descripcion:"C\xF3digo limpio, bien documentado y sigue patrones de arquitectura MVC/MVVM."}]},{codigo:"arte_final_experiencia_usuario",nombre:"Arte Final y Experiencia de Usuario",peso:"(10)",maxPuntos:10,niveles:[{valor:4,nombre:"Insuficiente",descripcion:"La interfaz es poco atractiva, inconsistente o dif\xEDcil de usar."},{valor:7,nombre:"Aceptable",descripcion:"La interfaz es funcional y consistente, pero visualmente simple."},{valor:10,nombre:"Excelente",descripcion:"Interfaz atractiva, consistente y ofrece una excelente experiencia de usuario."}]}]},Gt=[{codigo:"participacion_colaboracion",nombre:"Participaci\xF3n y Colaboraci\xF3n",peso:"(20)",maxPuntos:20,niveles:[{valor:6,nombre:"Insuficiente (0-6)",descripcion:"Participaci\xF3n m\xEDnima o nula. No muestra inter\xE9s ni aporta."},{valor:13,nombre:"Aceptable (7-13)",descripcion:"Participa ocasionalmente con aportes limitados."},{valor:20,nombre:"Excelente (14-20)",descripcion:"Participaci\xF3n activa y constante. Lidera iniciativas."}]},{codigo:"responsabilidad_cumplimiento",nombre:"Responsabilidad y Cumplimiento",peso:"(20)",maxPuntos:20,niveles:[{valor:6,nombre:"Insuficiente (0-6)",descripcion:"No cumple con responsabilidades asignadas."},{valor:13,nombre:"Aceptable (7-13)",descripcion:"Cumple parcialmente, algunas tareas quedan pendientes."},{valor:20,nombre:"Excelente (14-20)",descripcion:"Cumple puntualmente con todas las tareas asignadas."}]},{codigo:"comunicacion_presentacion",nombre:"Comunicaci\xF3n y Presentaci\xF3n",peso:"(20)",maxPuntos:20,niveles:[{valor:6,nombre:"Insuficiente (0-6)",descripcion:"Comunicaci\xF3n deficiente o poco clara."},{valor:13,nombre:"Aceptable (7-13)",descripcion:"Comunicaci\xF3n b\xE1sica pero efectiva."},{valor:20,nombre:"Excelente (14-20)",descripcion:"Comunicaci\xF3n clara, efectiva y profesional."}]},{codigo:"conocimiento_tecnico",nombre:"Conocimiento T\xE9cnico",peso:"(15)",maxPuntos:15,niveles:[{valor:4,nombre:"Insuficiente (0-4)",descripcion:"Conocimiento t\xE9cnico insuficiente o nulo."},{valor:10,nombre:"Aceptable (5-10)",descripcion:"Conocimiento t\xE9cnico b\xE1sico pero funcional."},{valor:15,nombre:"Excelente (11-15)",descripcion:"Dominio t\xE9cnico s\xF3lido y aplicado eficazmente."}]}],ii=(()=>{let p=class p{constructor(){this.route=y(ue),this.router=y(de),this.cursoService=y(rt),this.databaseService=y(at),this.alertController=y(fe),this.modalController=y(X),this.toastController=y(be),this.actionSheetController=y(_e),this.cursoId="",this.curso=null,this.estudiantes=[],this.estudiantesFiltrados=[],this.isLoading=!0,this.searchText="",this.subgrupoFilter="",this.subgrupos=[],this.selectedEstudiantes=new Set,this.selectAll=!1,this.entregas=["E1","E2","EF"],this.entregaActiva="E1",this.showSeguimiento=!1,this.subgrupoActual="G1",this.subgrupoSeleccionado="",this.evaluacionGrupalActiva=!1,this.mostrarResumen=!1,this.evaluacionActual={estudiante:null,entrega:"E1",criterios:{},comentariosCriterios:{},ajustesPuntaje:{},comentarios:"",fecha:new Date().toISOString(),esGrupal:!1},this.evaluacionGrupal={subgrupo:"",entrega:"E1",criterios:{},comentariosCriterios:{},ajustesPuntaje:{},comentarios:"",fecha:new Date().toISOString()},this.comentariosComunes=["Excelente trabajo, sigue as\xED","Buen desempe\xF1o, pero puede mejorar","Necesita m\xE1s participaci\xF3n en las actividades","Cumpli\xF3 con los objetivos planteados","Falt\xF3 profundidad en el an\xE1lisis","Presenta avances significativos","Requiere mayor compromiso con el equipo"],this.puntosActualizados=new Set,te({arrowBack:Me,filterOutline:Re,downloadOutline:$e,addOutline:Se,searchOutline:Ze,analyticsOutline:ye,close:ie,checkmarkCircleOutline:je,warningOutline:ot,alertCircleOutline:we,documentTextOutline:ze,locateOutline:Ke,listOutline:Ue,gitNetworkOutline:qe,phonePortraitOutline:He,helpOutline:Be,megaphoneOutline:Ye,flag:Le,createOutline:Ne,trashOutline:it,closeOutline:Te,chatboxOutline:ke,chatbox:Ie,buildOutline:Oe,refreshOutline:Qe,laptopOutline:We,codeWorkingOutline:Fe,videocamOutline:nt,checkmarkDoneOutline:Ge,constructOutline:Ve,colorPaletteOutline:De,peopleOutline:Je,timerOutline:tt,terminalOutline:et}),this.cargarComentariosComunes()}ngOnInit(){return P(this,null,function*(){let e=this.route.snapshot.paramMap.get("id");this.cursoId=e||"",this.cursoId?yield this.loadCurso():(console.error("No se proporcion\xF3 ID de curso."),this.isLoading=!1,yield this.showAlert("Error","No se especific\xF3 un ID de curso."),this.goBack())})}loadCurso(){return P(this,null,function*(){this.isLoading=!0;try{this.curso=yield this.cursoService.getCurso(this.cursoId),this.curso?(this.estudiantes=this.curso.estudiantes||[],this.extractSubgrupos(),this.curso.evaluaciones=yield this.databaseService.getEvaluacionesCurso(this.cursoId),this.applyFilters()):(console.warn(`Curso con ID ${this.cursoId} no encontrado.`),this.estudiantes=[],this.subgrupos=[],this.curso=null),this.isLoading=!1}catch(e){console.error("Error al cargar curso:",e),this.isLoading=!1,yield this.showAlert("Error","No se pudo cargar el curso")}})}extractSubgrupos(){let e=new Set;this.estudiantes.forEach(t=>{t.subgrupo&&e.add(t.subgrupo)}),this.subgrupos=Array.from(e).sort((t,i)=>{let a=parseInt(t.replace(/\D/g,""),10),l=parseInt(i.replace(/\D/g,""),10);return a-l})}getSubgruposOrdenados(){return this.subgrupos}applyFilters(){let e=[...this.estudiantes];if(this.searchText.trim()){let t=this.searchText.toLowerCase();e=e.filter(i=>i.apellidos.toLowerCase().includes(t)||i.nombres.toLowerCase().includes(t)||i.correo.toLowerCase().includes(t))}this.subgrupoFilter&&(e=e.filter(t=>t.subgrupo===this.subgrupoFilter)),this.estudiantesFiltrados=e,this.updateSelectAllState()}onSearchChange(e){let t=e.target;this.searchText=t?.value?.toLowerCase()||"",this.applyFilters()}onSubgrupoChange(e){this.subgrupoFilter=e.detail.value||"",this.applyFilters()}selectSubgrupo(e){this.subgrupoFilter=e,this.applyFilters()}selectSubgrupoFromPanel(e){this.subgrupoFilter=e,this.subgrupoActual=e||"G1",this.applyFilters()}clearFilters(){this.searchText="",this.subgrupoFilter="",this.applyFilters()}toggleSelectAll(e){let t=e.detail.checked;this.selectAll=t,t?this.estudiantesFiltrados.forEach(i=>{this.selectedEstudiantes.add(i.correo)}):this.selectedEstudiantes.clear()}toggleSelectEstudiante(e){this.selectedEstudiantes.has(e)?this.selectedEstudiantes.delete(e):this.selectedEstudiantes.add(e),this.updateSelectAllState()}updateSelectAllState(){this.estudiantesFiltrados.length>0?this.selectAll=this.estudiantesFiltrados.every(t=>this.selectedEstudiantes.has(t.correo)):this.selectAll=!1}isSelected(e){return this.selectedEstudiantes.has(e)}isPuntosActualizados(e){return this.puntosActualizados.has(e)}getEvaluacion(e,t){if(!this.curso?.evaluaciones)return null;let i=t,a=this.curso.evaluaciones[i];return a&&a[e]?a[e]:null}abrirEvaluacion(e){console.log("Iniciando evaluaci\xF3n para:",e),this.iniciarEvaluacion(e)}exportarCurso(){return P(this,null,function*(){if(!this.cursoId||!this.curso){this.showAlert("Error","No hay curso cargado para exportar.");return}try{let e=yield this.cursoService.exportCursoToCSV(this.cursoId),t=`${this.curso?.nombre.replace(/[\s/\\?%*:|"<>]/g,"_")}_${new Date().toISOString().slice(0,10)}.csv`,i=new Blob([e],{type:"text/csv;charset=utf-8"}),a=window.URL.createObjectURL(i),l=document.createElement("a");l.href=a,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(a),yield this.showToast("Curso exportado correctamente")}catch(e){console.error("Error al exportar:",e),yield this.showAlert("Error","No se pudo exportar el curso")}})}goBack(){this.router.navigate(["/home"])}toggleSeguimiento(){this.showSeguimiento=!this.showSeguimiento}onEntregaChange(e){this.entregaActiva=e.detail.value,this.subgrupoSeleccionado&&this.subgrupoSeleccionado!==""?this.activarRubricaGrupal(this.subgrupoSeleccionado):this.evaluacionActual.estudiante&&this.iniciarEvaluacion(this.evaluacionActual.estudiante)}seleccionarSubgrupo(e){this.subgrupoSeleccionado=e,e===""?(this.evaluacionGrupalActiva=!1,this.limpiarEvaluacionGrupal(),this.mostrarResumen=!1,this.evaluacionActual.estudiante&&this.iniciarEvaluacion(this.evaluacionActual.estudiante)):(this.activarRubricaGrupal(e),this.evaluacionActual.estudiante=null,this.evaluacionActual.esGrupal=!1,this.mostrarResumen=!1),this.subgrupoFilter=e,this.applyFilters()}activarRubricaGrupal(e){this.evaluacionGrupalActiva=!0,this.evaluacionGrupal={subgrupo:e,entrega:this.entregaActiva,criterios:{},comentariosCriterios:{},ajustesPuntaje:{},comentarios:"",fecha:new Date().toISOString()},this.cargarEvaluacionGrupalExistente(e,this.entregaActiva),console.log(`R\xFAbrica grupal activada para ${e} en entrega ${this.entregaActiva}`)}limpiarEvaluacionGrupal(){this.evaluacionGrupal={subgrupo:"",entrega:this.entregaActiva,criterios:{},comentariosCriterios:{},ajustesPuntaje:{},comentarios:"",fecha:new Date().toISOString()}}cancelarEvaluacion(){this.evaluacionGrupalActiva?(this.evaluacionGrupal.criterios={},this.evaluacionGrupal.comentariosCriterios={},this.evaluacionGrupal.ajustesPuntaje={},this.evaluacionGrupal.comentarios="",this.mostrarResumen=!1,this.showToast("Evaluaci\xF3n cancelada")):this.evaluacionActual.estudiante?(this.evaluacionActual.criterios={},this.evaluacionActual.comentariosCriterios={},this.evaluacionActual.ajustesPuntaje={},this.evaluacionActual.comentarios="",this.showToast("Evaluaci\xF3n cancelada")):(this.evaluacionGrupalActiva=!1,this.subgrupoSeleccionado="",this.limpiarEvaluacionGrupal())}actualizarVistaEvaluaciones(){this.curso&&(this.evaluacionGrupalActiva?this.estudiantes.filter(t=>t.subgrupo===this.evaluacionGrupal.subgrupo).forEach(t=>{this.puntosActualizados.add(t.correo)}):this.evaluacionActual.estudiante&&this.puntosActualizados.add(this.evaluacionActual.estudiante.correo),this.applyFilters(),setTimeout(()=>{this.puntosActualizados.clear(),this.applyFilters()},2e3))}getTotalEstudiantes(){return this.estudiantes.length}getCriterioIcon(e){return{documento_inicial:"document-text-outline",planteamiento_objetivos:"locate-outline",requerimientos:"list-outline",flujo_navegacion:"git-network-outline",mockups_wireframes:"phone-portrait-outline",atencion_ajustes_tutor:"build-outline",flujo_navegacion_mockups:"git-network-outline",requerimientos_actualizados:"refresh-outline",implementacion_interfaces:"laptop-outline",desarrollo_requerimientos:"code-working-outline",video:"videocam-outline",cumplimiento_requerimientos:"checkmark-done-outline",calidad_codigo_arquitectura:"construct-outline",arte_final_experiencia_usuario:"color-palette-outline",participacion_colaboracion:"people-outline",responsabilidad_cumplimiento:"timer-outline",comunicacion_presentacion:"megaphone-outline",conocimiento_tecnico:"terminal-outline"}[e]||"help-outline"}getCriterioColor(e){let t=["primary","secondary","tertiary","success","warning"],i=e.split("").reduce((a,l)=>a+l.charCodeAt(0),0);return t[i%t.length]}selectNivel(e,t){let i=this.evaluacionGrupalActiva,a=i?this.evaluacionGrupal:this.evaluacionActual;if(!i&&!a.estudiante){this.showAlert("Error","Debe seleccionar un estudiante para evaluar individualmente");return}if(i&&!a.subgrupo){this.showAlert("Error","Debe seleccionar un subgrupo para evaluar grupalmente");return}a.criterios[e]===t?(delete a.criterios[e],t=0):a.criterios[e]=t,(i?this.guardarEvaluacionGrupal():this.guardarEvaluacionActual()).then(()=>{this.actualizarVistaEvaluaciones();let d=i?a.subgrupo:a.estudiante?.nombres;this.showToast(`Puntos ${i?"grupales":"individuales"} actualizados: ${d} - ${t} pts`),console.log(`Evaluando ${i?"grupo "+a.subgrupo:d}: ${e} = ${t} puntos`)}).catch(d=>{console.error(`Error al guardar evaluaci\xF3n ${i?"grupal":"individual"}:`,d),this.showAlert("Error",`No se pudo guardar la evaluaci\xF3n ${i?"grupal":"individual"}`)})}getCriterioValue(e){return this.evaluacionGrupalActiva?this.evaluacionGrupal.criterios[e]??null:this.evaluacionActual.estudiante?this.evaluacionActual.criterios[e]??null:null}abrirComentarios(e,t){return P(this,null,function*(){console.log("Abriendo comentarios para:",e,t);let i=this.evaluacionGrupalActiva,a=i?this.evaluacionGrupal:this.evaluacionActual;if(!i&&!this.evaluacionActual.estudiante||i&&!this.evaluacionGrupal.subgrupo){this.showAlert("Error","Seleccione un estudiante o active la evaluaci\xF3n grupal primero.");return}let l=a.comentariosCriterios[e]||"",d=a.criterios[e],h=this.getCriteriosEntregaActiva().find(k=>k.codigo===e)?.niveles.find(k=>k.valor===d),v=h?h.valor:0,f=a.ajustesPuntaje[e]||0,V=(a.criterios[e]??0)-f;try{let k=yield this.modalController.create({component:st,componentProps:{criterioNombre:t,comentarios:l,puntajeOriginal:V,ajustePuntaje:f,comentariosComunes:this.comentariosComunes}});yield k.present(),console.log("Modal presentado");let{data:I,role:ne}=yield k.onWillDismiss();if(console.log("Modal cerrado con role:",ne,"data:",I),ne==="confirm"&&I){if(I.guardarComoComun&&I.comentarios.trim()&&this.guardarComentarioComun(I.comentarios.trim()),a.comentariosCriterios[e]=I.comentarios,I.ajustePuntaje!==void 0){a.ajustesPuntaje[e]=I.ajustePuntaje;let lt=Math.max(0,V+I.ajustePuntaje);a.criterios[e]=lt}yield i?this.guardarEvaluacionGrupal():this.guardarEvaluacionActual(),this.actualizarVistaEvaluaciones(),this.showToast("Comentario y ajuste guardados")}}catch(k){console.error("Error al abrir/procesar modal de comentarios:",k),this.showAlert("Error","No se pudo guardar el comentario/ajuste")}})}getRangoNivel(e,t){let i=e.niveles;if(!i||t>=i.length)return"";let a=i[t],l=i[t-1];return t===0?`(0 - ${a.valor})`:t===i.length-1?`(${l?l.valor+1:a.valor} - ${e.maxPuntos})`:`(${l?l.valor+1:a.valor} - ${a.valor})`}guardarComentarioComun(e){e&&!this.comentariosComunes.includes(e)&&(this.comentariosComunes.push(e),localStorage.setItem("comentariosComunes",JSON.stringify(this.comentariosComunes)),this.showToast("Comentario com\xFAn guardado"))}cargarComentariosComunes(){let e=["Excelente trabajo, sigue as\xED","Buen desempe\xF1o, pero puede mejorar","Necesita m\xE1s participaci\xF3n en las actividades","Cumpli\xF3 con los objetivos planteados","Falt\xF3 profundidad en el an\xE1lisis","Presenta avances significativos","Requiere mayor compromiso con el equipo"],t=[],i=localStorage.getItem("comentariosComunes");if(i)try{let l=JSON.parse(i);Array.isArray(l)&&(t=l)}catch(l){console.error("Error cargando comentarios comunes:",l),localStorage.removeItem("comentariosComunes")}let a=new Set([...e,...t]);this.comentariosComunes=Array.from(a)}getNivelesRubrica(){let e=this.getCriteriosEntregaActiva();return e.length>0&&e[0].niveles?e[0].niveles:[]}calcularTotalEvaluacion(){let e=this.getCriteriosEntregaActiva(),t=0,i=this.evaluacionGrupalActiva?this.evaluacionGrupal.criterios:this.evaluacionActual.criterios;return e.forEach(a=>{let l=i[a.codigo];typeof l=="number"&&(t+=l)}),t}getMaximoPuntaje(){return this.getCriteriosEntregaActiva().reduce((t,i)=>t+(i.maxPuntos||0),0)}isNivelSelectedForCriterio(e,t){return(this.evaluacionGrupalActiva?this.evaluacionGrupal.criterios:this.evaluacionActual.criterios)[e]===t}isTodosCriteriosConNivel(e){if(!this.evaluacionActual.estudiante&&!this.evaluacionGrupalActiva)return!1;let t=this.getCriteriosEntregaActiva();if(t.length===0)return!1;let i=this.evaluacionGrupalActiva?this.evaluacionGrupal.criterios:this.evaluacionActual.criterios;return t.every(a=>{let l=a.niveles?.[e]?.valor;return l!==void 0&&i[a.codigo]===l})}selectNivelParaTodosCriterios(e){if(!this.evaluacionActual.estudiante&&!this.evaluacionGrupalActiva){this.showToast("Seleccione un estudiante o active la evaluaci\xF3n grupal primero");return}let t=this.getCriteriosEntregaActiva(),i=this.isTodosCriteriosConNivel(e),a=this.evaluacionGrupalActiva?this.evaluacionGrupal:this.evaluacionActual;i?(t.forEach(d=>{delete a.criterios[d.codigo]}),this.showToast("Nivel deseleccionado para todos los criterios")):(t.forEach(d=>{let m=d.niveles?.[e]?.valor;m!==void 0&&(a.criterios[d.codigo]=m)}),this.showToast("Nivel aplicado a todos los criterios")),(this.evaluacionGrupalActiva?this.guardarEvaluacionGrupal():this.guardarEvaluacionActual()).catch(d=>{console.error("Error saving after bulk level select:",d),this.showAlert("Error","No se pudieron guardar los cambios masivos.")})}iniciarEvaluacion(e){this.evaluacionGrupalActiva=!1,this.subgrupoSeleccionado="",this.limpiarEvaluacionGrupal(),this.mostrarResumen=!1,this.evaluacionActual={estudiante:e,entrega:this.entregaActiva,criterios:{},comentariosCriterios:{},ajustesPuntaje:{},comentarios:"",fecha:new Date().toISOString(),esGrupal:!1},this.cargarEvaluacionExistente(e,this.entregaActiva),console.log(`Evaluaci\xF3n individual iniciada para ${e.nombres} ${e.apellidos}`)}cargarEvaluacionGrupalExistente(e,t){return P(this,null,function*(){try{let i=this.estudiantes.filter(m=>m.subgrupo===e);if(i.length===0||!this.curso?.evaluaciones)return;let a=t,l=this.curso.evaluaciones[a],d;for(let m of i){let h=l?.[m.correo];if(h?.grup_eval){d=h;break}}if(this.evaluacionGrupal.criterios={},this.evaluacionGrupal.comentariosCriterios={},this.evaluacionGrupal.ajustesPuntaje={},d?.grup_eval){let m=d.grup_eval,h=m.criterios||[],v=this.getCriteriosEntregaActiva();h.forEach(f=>{let O=v.find(V=>V.nombre===f.nombre);O&&(this.evaluacionGrupal.criterios[O.codigo]=f.points,this.evaluacionGrupal.comentariosCriterios[O.codigo]=m.comentariosCriterios?.[O.codigo]||"",this.evaluacionGrupal.ajustesPuntaje[O.codigo]=m.ajustesPuntaje?.[O.codigo]||0)}),this.evaluacionGrupal.comentarios=m.comentarios||"",console.log("Evaluaci\xF3n grupal cargada:",this.evaluacionGrupal.criterios)}else console.log(`No group evaluation data found for ${e} in ${t}. Initializing.`),this.evaluacionGrupal.comentarios=""}catch(i){console.error("Error cargando evaluaci\xF3n grupal existente:",i)}})}cargarEvaluacionExistente(e,t){return P(this,null,function*(){try{let i=this.getEvaluacion(e.correo,t);if(this.evaluacionActual.criterios={},this.evaluacionActual.comentariosCriterios={},this.evaluacionActual.ajustesPuntaje={},i?.ind_eval){let a=i.ind_eval,l=a.criterios||[],d=this.getCriteriosEntregaActiva();l.forEach(m=>{let h=d.find(v=>v.nombre===m.nombre);h&&(this.evaluacionActual.criterios[h.codigo]=m.points,this.evaluacionActual.comentariosCriterios[h.codigo]=a.comentariosCriterios?.[h.codigo]||"",this.evaluacionActual.ajustesPuntaje[h.codigo]=a.ajustesPuntaje?.[h.codigo]||0)}),this.evaluacionActual.comentarios=a.comentarios||"",console.log("Evaluaci\xF3n individual cargada:",this.evaluacionActual.criterios)}else console.log(`No individual evaluation data found for ${e.correo} in ${t}. Initializing.`),this.evaluacionActual.comentarios=""}catch(i){console.error("Error cargando evaluaci\xF3n existente:",i)}})}guardarEvaluacionActual(){return P(this,null,function*(){if(!(!this.evaluacionActual.estudiante||!this.curso))try{let e=this.getCriteriosEntregaActiva().map(d=>{let m=this.evaluacionActual.criterios[d.codigo],h=d.niveles.find(v=>v.valor===m);return{nombre:d.nombre,descripcion:d.peso,selectedLevel:h?.valor,points:m??0,niveles:d.niveles.map(v=>({nivel:v.valor,descripcion:v.descripcion,puntos:v.valor}))}}),t=this.calcularTotalEvaluacion(),i={criterios:e,totalScore:t,comentarios:this.evaluacionActual.comentarios,fecha:this.evaluacionActual.fecha,comentariosCriterios:this.evaluacionActual.comentariosCriterios,ajustesPuntaje:this.evaluacionActual.ajustesPuntaje};this.curso.evaluaciones||(this.curso.evaluaciones={E1:{},E2:{},EF:{}});let a=this.evaluacionActual.entrega;this.curso.evaluaciones[a]||(this.curso.evaluaciones[a]={});let l=this.curso.evaluaciones[a];if(l){let d=l[this.evaluacionActual.estudiante.correo],m={correo:this.evaluacionActual.estudiante.correo,pg_score:d?.pg_score,pi_score:t,ind_eval:i,grup_eval:d?.grup_eval,sumatoria:t+(d?.pg_score??0)};l[this.evaluacionActual.estudiante.correo]=m}yield this.databaseService.saveCurso(this.curso.id,this.curso),console.log("Evaluaci\xF3n individual guardada exitosamente")}catch(e){throw console.error("Error guardando evaluaci\xF3n individual:",e),this.showAlert("Error","No se pudo guardar la evaluaci\xF3n individual"),e}})}guardarEvaluacionGrupal(){return P(this,null,function*(){if(!(!this.evaluacionGrupal.subgrupo||!this.curso))try{let e=this.getCriteriosEntregaActiva().map(m=>{let h=this.evaluacionGrupal.criterios[m.codigo],v=m.niveles.find(f=>f.valor===h);return{nombre:m.nombre,descripcion:m.peso,selectedLevel:v?.valor,points:h??0,niveles:m.niveles.map(f=>({nivel:f.valor,descripcion:f.descripcion,puntos:f.valor}))}}),t=this.calcularTotalEvaluacion(),i={criterios:e,totalScore:t,comentarios:this.evaluacionGrupal.comentarios,fecha:this.evaluacionGrupal.fecha,comentariosCriterios:this.evaluacionGrupal.comentariosCriterios,ajustesPuntaje:this.evaluacionGrupal.ajustesPuntaje},a=this.estudiantes.filter(m=>m.subgrupo===this.evaluacionGrupal.subgrupo);this.curso.evaluaciones||(this.curso.evaluaciones={E1:{},E2:{},EF:{}});let l=this.evaluacionGrupal.entrega;this.curso.evaluaciones[l]||(this.curso.evaluaciones[l]={});let d=this.curso.evaluaciones[l];d&&a.forEach(m=>{let h=d[m.correo],v={correo:m.correo,pg_score:t,pi_score:h?.pi_score,ind_eval:h?.ind_eval,grup_eval:i,sumatoria:t+(h?.pi_score??0)};d[m.correo]=v}),yield this.databaseService.saveCurso(this.curso.id,this.curso),this.mostrarResumen=!0,console.log(`Evaluaci\xF3n grupal guardada para ${this.evaluacionGrupal.subgrupo}`)}catch(e){throw console.error("Error guardando evaluaci\xF3n grupal:",e),this.showAlert("Error","No se pudo guardar la evaluaci\xF3n grupal"),e}})}actualizarComentarios(e){this.evaluacionGrupalActiva?(this.evaluacionGrupal.comentarios=e,this.guardarEvaluacionGrupal()):this.evaluacionActual.estudiante&&(this.evaluacionActual.comentarios=e,this.guardarEvaluacionActual())}getPorcentajeCompletitud(){let e=this.calcularTotalEvaluacion(),t=this.getMaximoPuntaje();return t>0?Math.round(e/t*100):0}getTextoRendimiento(){let e=this.getPorcentajeCompletitud();return e===0&&!this.isAnyCriterioEvaluated()?"Sin evaluar":e<40?"Malo":e<60?"Deficiente":e<75?"Aceptable":e<90?"Bueno":"Excelente"}isAnyCriterioEvaluated(){let e=this.evaluacionGrupalActiva?this.evaluacionGrupal.criterios:this.evaluacionActual.criterios;return Object.keys(e).length>0}getClaseRendimiento(){let e=this.getPorcentajeCompletitud();return e===0&&!this.isAnyCriterioEvaluated()?"ninguno":e<40?"malo":e<60?"deficiente":e<75?"aceptable":e<90?"bueno":"excelente"}isEvaluacionCompleta(){let e=this.getCriteriosEntregaActiva(),t=this.evaluacionGrupalActiva?this.evaluacionGrupal.criterios:this.evaluacionActual.criterios;return e.every(i=>t[i.codigo]!==void 0&&t[i.codigo]!==null)}finalizarEvaluacion(){return P(this,null,function*(){if(!this.isEvaluacionCompleta()){this.showAlert("Evaluaci\xF3n incompleta","Debe evaluar todos los criterios antes de finalizar.");return}try{let e=this.evaluacionGrupalActiva;yield e?this.guardarEvaluacionGrupal():this.guardarEvaluacionActual(),this.actualizarVistaEvaluaciones();let i=this.calcularTotalEvaluacion(),a=this.getMaximoPuntaje(),l=this.getPorcentajeCompletitud(),d="";e?d=`Evaluaci\xF3n grupal de ${this.evaluacionGrupal.subgrupo} finalizada.
Puntuaci\xF3n: ${i}/${a} puntos (${l}%)`:this.evaluacionActual.estudiante&&(d=`Evaluaci\xF3n de ${this.evaluacionActual.estudiante.nombres} finalizada.
Puntuaci\xF3n: ${i}/${a} puntos (${l}%)`),yield this.showAlert("Evaluaci\xF3n completada",d),e?this.mostrarResumen=!0:this.evaluacionActual.estudiante}catch(e){console.error("Error finalizando evaluaci\xF3n:",e),this.showAlert("Error","No se pudo finalizar la evaluaci\xF3n.")}})}getCriteriosEntregaActiva(){if(this.evaluacionGrupalActiva&&this.subgrupoSeleccionado&&this.subgrupoSeleccionado!==""){let e=this.entregaActiva;return ct[e]||ct.E1}else return Gt}getCriterioStats(e){let i=this.getCriteriosEntregaActiva().find(a=>a.codigo===e);return i?i.niveles.map((a,l)=>({label:`${a.nombre.charAt(0)}(${a.valor})`,value:Math.floor(Math.random()*3).toString(),color:l===0?"var(--ion-color-danger)":l===1?"var(--ion-color-warning)":"var(--ion-color-success)"})):[{label:"N/A",value:"0",color:"var(--ion-color-medium)"}]}getResumenCriterios(){return[{criterio:"Criterio 1 (Justificaci\xF3n)",estadisticas:"I(0), A(1), E(2) - Nivel Alcanzado: N/A (0 Puntos)"},{criterio:"Criterio 2 (Objetivos)",estadisticas:"I(1), A(2), E(3) - Nivel Alcanzado: N/A (0 Puntos)"},{criterio:"Criterio 3 (Requerimientos)",estadisticas:"I(4), A(8), E(10) - Nivel Alcanzado: N/A (0 Puntos)"},{criterio:"Criterio 4 (Flujo de Navegaci\xF3n)",estadisticas:"I(9), A(20), E(30) - Nivel Alcanzado: N/A (0 Puntos)"}]}getResumenRubrica(){if(!this.evaluacionGrupalActiva||!this.mostrarResumen)return[];let e=this.getCriteriosEntregaActiva(),t=this.evaluacionGrupal.criterios,i=this.evaluacionGrupal.comentariosCriterios;return e.map(a=>{let l=t[a.codigo],d=a.niveles.find(v=>v.valor===l),m=i[a.codigo]||"",h=a.niveles.map((v,f)=>`${v.nombre.charAt(0)}:${this.getRangoNivel(a,f)}`).join(", ");return{nombre:a.nombre,peso:a.peso,nivelesInfo:h,nivelSeleccionado:d?.nombre||"No evaluado",descripcion:d?.descripcion||"",puntos:l??0,comentario:m,tieneComentario:!!m}})}tieneComentarioCriterio(e){let t=this.evaluacionGrupalActiva?this.evaluacionGrupal.comentariosCriterios:this.evaluacionActual.comentariosCriterios;return!!(t&&t[e]?.trim())}getRendimientoEntrega(e){let t=this.evaluacionGrupal.subgrupo,i=this.evaluacionActual.estudiante,l=e==="EF"?100:75,d=null;if(this.evaluacionGrupalActiva&&t){let m=this.estudiantes.filter(h=>h.subgrupo===t);m.length>0&&(d=this.getEvaluacion(m[0].correo,e))}else i&&(d=this.getEvaluacion(i.correo,e));if(d){let m=d.sumatoria??0,h=l>0?Math.round(m/l*100):0;return`${m}/${l} pts (${h}%) - ${this.getTextoRendimientoPorPorcentaje(h)}`}return`0/${l} pts (0%) - Sin evaluar`}getTextoRendimientoPorPorcentaje(e){return e<=0?"Sin evaluar":e<40?"Malo":e<60?"Deficiente":e<75?"Aceptable":e<90?"Bueno":"Excelente"}showAlert(e,t){return P(this,null,function*(){yield(yield this.alertController.create({header:e,message:t,buttons:["OK"]})).present()})}showToast(e,t="success"){return P(this,null,function*(){yield(yield this.toastController.create({message:e,duration:2e3,position:"top",color:t,buttons:[{icon:"close",role:"cancel"}]})).present()})}abrirMenuContexto(e,t){return P(this,null,function*(){t.preventDefault(),t.stopPropagation(),yield(yield this.actionSheetController.create({header:`${e.nombres} ${e.apellidos}`,subHeader:e.correo,buttons:[{text:"Editar E1",icon:"create-outline",handler:()=>this.abrirEditorPuntos(e,"E1")},{text:"Editar E2",icon:"create-outline",handler:()=>this.abrirEditorPuntos(e,"E2")},{text:"Editar EF",icon:"create-outline",handler:()=>this.abrirEditorPuntos(e,"EF")},{text:"Eliminar estudiante",icon:"trash-outline",role:"destructive",handler:()=>this.confirmarEliminacion(e)},{text:"Cancelar",icon:"close-outline",role:"cancel"}]})).present()})}abrirEditorPuntos(e,t){return P(this,null,function*(){let i=this.getEvaluacion(e.correo,t),a=i?.pg_score??"",l=i?.pi_score??"";yield(yield this.alertController.create({header:`Editar ${t} - ${e.nombres} ${e.apellidos}`,inputs:[{name:"pg_score",type:"number",placeholder:"PG (Puntos Grupal)",value:a,min:0,max:100},{name:"pi_score",type:"number",placeholder:"PI (Puntos Individual)",value:l,min:0,max:100}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:m=>P(this,null,function*(){yield this.guardarPuntosEditados(e,t,m)})}]})).present()})}guardarPuntosEditados(e,t,i){return P(this,null,function*(){try{let a=Number(i.pg_score??0),l=Number(i.pi_score??0),d=isNaN(a)?0:a,m=isNaN(l)?0:l,h=d+m;if(!this.curso)throw new Error("Curso no est\xE1 cargado.");this.curso.evaluaciones||(this.curso.evaluaciones={E1:{},E2:{},EF:{}});let v=t;this.curso.evaluaciones[v]||(this.curso.evaluaciones[v]={});let f=this.curso.evaluaciones[v];if(!f)throw new Error("Evaluaciones de entrega no encontradas.");let O=f[e.correo]||{correo:e.correo},V=ae(oe({},O),{correo:e.correo,pg_score:d,pi_score:m,sumatoria:h});f[e.correo]=V,yield this.databaseService.saveCurso(this.curso.id,this.curso),yield this.showToast(`Puntos de ${t} guardados correctamente`),this.actualizarVistaEvaluaciones()}catch(a){console.error("Error al guardar puntos:",a),yield this.showAlert("Error",`No se pudieron guardar los puntos: ${a?.message||a}`)}})}confirmarEliminacion(e){return P(this,null,function*(){yield(yield this.alertController.create({header:"Confirmar eliminaci\xF3n",message:`\xBFEst\xE1 seguro de que desea eliminar a ${e.nombres} ${e.apellidos} de este curso? Esta acci\xF3n no se puede deshacer.`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>P(this,null,function*(){yield this.eliminarEstudiante(e)})}]})).present()})}eliminarEstudiante(e){return P(this,null,function*(){try{if(this.curso){if(this.estudiantes=this.estudiantes.filter(t=>t.correo!==e.correo),this.estudiantesFiltrados=this.estudiantesFiltrados.filter(t=>t.correo!==e.correo),this.curso.estudiantes=this.estudiantes,this.curso.evaluaciones){let t=this.curso.evaluaciones;Object.keys(t).forEach(i=>{let a=t[i];a&&a[e.correo]&&delete a[e.correo]})}yield this.databaseService.saveCurso(this.cursoId,this.curso),yield this.showToast(`${e.nombres} ${e.apellidos} ha sido eliminado del curso`,"success"),this.applyFilters()}}catch(t){console.error("Error al eliminar estudiante:",t),yield this.showAlert("Error",`No se pudo eliminar el estudiante: ${t?.message||t}`)}})}};p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=N({type:p,selectors:[["app-curso-detail"]],decls:21,vars:8,consts:[[3,"translucent"],[1,"curso-header"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["slot","start",1,"header-content"],["src","assets/logo-poli.svg","alt","Polit\xE9cnico Grancolombiano",1,"poli-logo"],[1,"header-text"],[1,"curso-title"],[1,"curso-subtitle"],["slot","end"],[3,"click","color"],["slot","icon-only","name","analytics-outline"],["slot","icon-only","name","download-outline"],[3,"fullscreen"],["class","loading-container",4,"ngIf"],["class","main-layout shared-layout",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-container"],["name","crescent"],[1,"main-layout","shared-layout"],[1,"table-section"],[1,"toolbar-container"],["placeholder","Buscar estudiante...","debounce","300",1,"search-bar",3,"ngModelChange","ionInput","ngModel"],[1,"table-wrapper-fixed"],[1,"student-table"],[1,"header-row"],[1,"sticky-left","checkbox-col"],[3,"ngModelChange","ionChange","ngModel"],[1,"sticky-left","apellidos-col"],[1,"sticky-left","nombres-col"],[1,"grupo-col"],[1,"entrega-col"],[1,"entrega-col","sum-col"],[1,"sticky-right","entrega-col","sum-col"],["class","student-row",3,"selected","evaluando","puntos-actualizados","click",4,"ngFor","ngForOf"],["class","resumen-section",4,"ngIf"],[1,"seguimiento-panel","visible"],[1,"seguimiento-header"],[1,"total-badge"],["class","evaluacion-resumen",4,"ngIf"],[1,"seguimiento-content"],[1,"entrega-tabs"],["value","E1"],["value","E2"],["value","EF"],[1,"tabs-separator"],[1,"filtros-container"],[1,"filtro-btn",3,"click"],["class","filtro-btn",3,"active","click",4,"ngFor","ngForOf"],["class","evaluacion-activa",4,"ngIf"],["class","rubrica-table-container",4,"ngIf"],[1,"student-row",3,"click"],[1,"sticky-left","checkbox-col",3,"click"],[3,"ionChange","checked"],[1,"score-col",3,"click"],[1,"editable-score",3,"click"],[1,"score-col","sum-col"],[1,"sticky-right","score-col","sum-col"],[1,"resumen-section"],[1,"rubrica-resumen-scroll"],[1,"resumen-titulo"],[1,"resumen-criterios"],["class","criterio-resumen",4,"ngFor","ngForOf"],[1,"rendimiento-entregas"],[1,"rendimiento-titulo"],["class","entrega-rendimiento",4,"ngFor","ngForOf"],[1,"criterio-resumen"],[1,"criterio-header-resumen"],[1,"criterio-niveles"],[1,"criterio-evaluacion"],[1,"criterio-descripcion"],["class","criterio-comentario",4,"ngIf"],[1,"criterio-comentario"],[1,"entrega-rendimiento"],[1,"entrega-nombre"],[1,"entrega-info"],[1,"evaluacion-resumen"],[1,"resumen-item"],[1,"label"],[1,"value"],[1,"progress-bar"],[1,"progress-fill"],[1,"evaluacion-activa"],[1,"evaluacion-info-row"],[1,"estudiante-info"],[4,"ngIf"],[1,"evaluacion-meta"],[1,"entrega-badge"],[1,"tipo-badge"],[1,"progreso-badge",3,"ngClass"],[1,"evaluacion-actions-buttons"],["title","Cancelar evaluaci\xF3n",1,"action-btn","cancel-btn",3,"click"],["title","Finalizar evaluaci\xF3n",1,"action-btn","save-btn",3,"click","disabled"],[1,"rubrica-table-container"],[1,"rubrica-table-header"],[1,"header-criterio"],["class","header-nivel",3,"class","active",4,"ngFor","ngForOf"],[1,"rubrica-table-body"],["class","rubrica-row",4,"ngFor","ngForOf"],[1,"header-nivel"],[1,"nivel-nombre",3,"click"],[1,"rubrica-row"],[1,"criterio-cell"],[1,"criterio-header-row"],["fill","clear","size","small",3,"click","title"],["slot","icon-only",3,"name"],[1,"criterio-peso"],["class","nivel-cell",3,"class","selected","available","click",4,"ngFor","ngForOf"],[1,"nivel-cell",3,"click"],[1,"nivel-content"],[1,"nivel-header-inline"],[1,"nivel-valor-container"],["name","flag","class","flag-icon",4,"ngIf"],[1,"nivel-valor"],[1,"nivel-rango"],[1,"nivel-descripcion"],["name","flag",1,"flag-icon"],[1,"empty-state"],["name","school-outline",1,"empty-icon"]],template:function(t,i){t&1&&(o(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),_("click",function(){return i.goBack()}),S(4,"ion-icon",4),r()(),o(5,"div",5),S(6,"img",6),o(7,"div",7)(8,"ion-title",8),c(9),r(),o(10,"span",9),c(11,"Sistema de Evaluaci\xF3n Acad\xE9mica"),r()()(),o(12,"ion-buttons",10)(13,"ion-button",11),_("click",function(){return i.toggleSeguimiento()}),S(14,"ion-icon",12),r(),o(15,"ion-button",3),_("click",function(){return i.exportarCurso()}),S(16,"ion-icon",13),r()()()(),o(17,"ion-content",14),A(18,vt,4,0,"div",15)(19,kt,63,13,"div",16)(20,jt,6,0,"div",17),r()),t&2&&(x("translucent",!0),s(9),D(" ",(i.curso==null?null:i.curso.codigo)||""," - ",(i.curso==null?null:i.curso.nombre)||"Curso"," "),s(4),x("color",i.showSeguimiento?"secondary":"light"),s(4),x("fullscreen",!0),s(),x("ngIf",i.isLoading),s(),x("ngIf",!i.isLoading&&i.curso),s(),x("ngIf",!i.isLoading&&(!i.curso||i.estudiantes.length===0)))},dependencies:[R,ce,$,le,B,L,q,Y,Q,H,K,U,W,ee,xe,Ee,ve,J,he,Z],styles:['@charset "UTF-8";SCSS[_ngcontent-%COMP%]   vac\\edo[_ngcontent-%COMP%]   .home-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--poli-color-academic-blue) 50%,var(--ion-color-secondary) 100%);color:#fff;padding:24px 0}SCSS[_ngcontent-%COMP%]   vac\\edo[_ngcontent-%COMP%]   .home-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:28px;font-weight:800;letter-spacing:-1px;text-align:center}SCSS[_ngcontent-%COMP%]   vac\\edo[_ngcontent-%COMP%]   .home-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{text-align:center;font-size:16px;opacity:.9;margin-top:4px;font-weight:400}.cursos-container[_ngcontent-%COMP%]{padding:16px}.cursos-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--ion-color-dark);margin:0 0 16px;letter-spacing:-.5px}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: var(--ion-background-color);--border-radius: 16px;--padding-start: 20px;--padding-end: 20px;--min-height: 80px;margin-bottom:12px;box-shadow:0 2px 12px #0000000f;border:1px solid var(--ion-color-step-100);transition:all .3s cubic-bezier(.4,0,.2,1)}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover{--background: var(--ion-color-step-50);box-shadow:0 8px 24px rgba(var(--ion-color-primary-rgb),.12);transform:translateY(-2px);border-color:rgba(var(--ion-color-primary-rgb),.2)}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:active{transform:translateY(0);transition-duration:.1s}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:8px 0}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;font-size:20px;margin-bottom:8px;color:var(--ion-color-dark);letter-spacing:-.3px;line-height:1.2}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium);margin:4px 0;font-weight:500}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p.student-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p.student-count[_ngcontent-%COMP%]:before{content:"\\1f465";font-size:16px}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .curso-date[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium-shade);font-weight:400;opacity:.8}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .curso-date[_ngcontent-%COMP%]:before{content:"\\1f4c5";margin-right:4px}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:60%;background:linear-gradient(to bottom,var(--ion-color-primary),var(--ion-color-secondary));border-radius:0 4px 4px 0;opacity:0;transition:opacity .3s ease}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover:before{opacity:1}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: var(--ion-color-medium);--background-hover: rgba(var(--ion-color-primary-rgb), .1);--border-radius: 12px;transition:all .3s ease}.cursos-container[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--color: var(--ion-color-primary);transform:scale(1.1)}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;padding:0 16px 16px}.stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:var(--ion-background-color);border-radius:16px;padding:20px;text-align:center;box-shadow:0 2px 12px #0000000f;border:1px solid var(--ion-color-step-100);transition:all .3s ease}.stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #0000001a;transform:translateY(-2px)}.stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:800;color:var(--ion-color-primary);margin-bottom:4px;line-height:1}.stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh;padding:48px 32px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-illustration[_ngcontent-%COMP%]{width:200px;height:200px;margin-bottom:32px;opacity:.6}.empty-state[_ngcontent-%COMP%]   .empty-illustration[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:120px;color:var(--ion-color-medium);background:linear-gradient(135deg,var(--ion-color-primary),var(--ion-color-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:800;margin-bottom:12px;color:var(--ion-color-dark);letter-spacing:-.5px;line-height:1.2}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:var(--ion-color-medium);margin-bottom:40px;max-width:400px;line-height:1.6;font-weight:400}.empty-state[_ngcontent-%COMP%]   .empty-action[_ngcontent-%COMP%]{max-width:280px;--height: 56px;--border-radius: 28px;font-size:18px;font-weight:700;letter-spacing:.5px}.empty-state[_ngcontent-%COMP%]   .empty-action[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:8px}ion-fab[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--poli-color-accent-gold), var(--ion-color-warning));--color: white;--box-shadow: 0 6px 20px rgba(var(--poli-color-accent-gold-rgb), .4);--border-radius: 20px;--transition: all .3s cubic-bezier(.4, 0, .2, 1);width:64px;height:64px}ion-fab[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]:hover{--box-shadow: 0 8px 28px rgba(var(--poli-color-accent-gold-rgb), .6);transform:translateY(-3px) scale(1.05)}ion-fab[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]:active{transform:translateY(-1px) scale(.98);transition-duration:.1s}ion-fab[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;font-weight:700}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.loading-container[_ngcontent-%COMP%]{height:60vh}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:60px;height:60px;--color: var(--ion-color-primary);margin-bottom:24px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:var(--ion-color-medium)}@media (max-width: 768px){.cursos-container[_ngcontent-%COMP%]{padding:12px}.cursos-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 72px;--padding-start: 16px;--padding-end: 16px}.cursos-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);padding:0 12px 12px}.stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{padding:16px}.stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:24px}.stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px}.empty-state[_ngcontent-%COMP%]{padding:32px 24px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}']});let u=p;return u})();export{ii as CursoDetailPage};
